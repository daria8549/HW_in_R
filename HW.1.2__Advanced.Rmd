---
title: "IC.1.2 Advanced"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# HW: Homework exercises

When submitting to Canvas, make sure to submit this .Rmd file with your solutions and not the knitted PDF, HTML or any other file. Note: In order to be able to complete the assignments, you may need to re-run the .Rmd codeblocks in the current week's notebook to have the variables required stored in your local environment.

## HW.2 (Advanced - 2 points)


Recall from HW.1 the cold start problem: 

> One of the biggest challenges in building a recommendation system is the cold start problem. This occurs when there is not enough data about new users or new items to generate meaningful recommendations.

One potential mitigation strategy is using a popularity-based recommender system. Your task is to craft such a system that recommends movies to the specified users based on the popularity of the movies. The definition of popularity is up to you, but please justify your choice. 

```{r}

#Create your recommender within this function which takes as arguments the id of the user that we wish to recommend to and the parameter n which specifies how many of the top recommendations to return

recommend_popular <- function(user_id,n=10) {
  # Aggregating the mean ratings across all users for each movie
  rating_means <- aggregate(rating ~ item, ML_df, mean, na.rm = TRUE)
  # Sorting out movies with ranking 4 and above
  high_rated_movies <- rating_means[rating_means$rating > 3.99, ]
  # Aggregating the number of ratings across all users for each movie
  ratings_per_movie <- aggregate(user~item,ML_df, length)
  # Combining movies with highest ratings with the number of ratings
  movie_features <- merge(high_rated_movies, ratings_per_movie, by = "item")
  
  movie_sorted <- movie_features[order(movie_features$user, decreasing = T),]
  top_movies <- head(movie_sorted$item, n)
  return(top_movies)
  #Hint: use the variables ML_matrix OR ML_df as seen in the notebook
}

#This should return the movie titles of the top-10 recommended movies for user 5
recommend_popular(5,10)

```

```
Popularity in this case - movies with the most amount of ratings above 3 (4 or 5).
An average rating above 3.99 - means the movie is good.
Several ratings filter - prioritizes movies that are widely watched. 
Their combination ensures that the recommended films are both high-quality and popular.

Also, I wasn't sure why the user_id was given, and if I was supposed to use it, e.g. popularity in terms of specific user cluster or smth.

```